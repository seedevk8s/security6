<svg viewBox="0 0 1800 1400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 26px; font-weight: bold; fill: #2c3e50; }
      .subtitle { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #e74c3c; }
      .text { font-family: Arial, sans-serif; font-size: 14px; fill: #2c3e50; }
      .small-text { font-family: Arial, sans-serif; font-size: 12px; fill: #34495e; }
      .component-text { font-family: Arial, sans-serif; font-size: 13px; font-weight: bold; fill: white; text-anchor: middle; }
      .auth-text { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; fill: white; text-anchor: middle; }
      
      /* ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
      .was-container { fill: #2980b9; stroke: #1f4e79; stroke-width: 3; opacity: 0.9; }
      .web-container { fill: #8e44ad; stroke: #6c3483; stroke-width: 3; opacity: 0.9; }
      .spring-container { fill: #27ae60; stroke: #1e8449; stroke-width: 3; opacity: 0.9; }
      
      /* ì»´í¬ë„ŒíŠ¸ ìŠ¤íƒ€ì¼ */
      .delegating-filter { fill: #e74c3c; stroke: #c0392b; stroke-width: 2; }
      .security-filter-chain { fill: #f39c12; stroke: #e67e22; stroke-width: 2; }
      .auth-filter { fill: #9b59b6; stroke: #7d3c98; stroke-width: 2; }
      .auth-manager { fill: #16a085; stroke: #138d75; stroke-width: 2; }
      .auth-provider { fill: #2e86ab; stroke: #21618c; stroke-width: 2; }
      .user-service { fill: #d35400; stroke: #a04000; stroke-width: 2; }
      .database { fill: #34495e; stroke: #2c3e50; stroke-width: 2; }
      
      /* í™”ì‚´í‘œ ìŠ¤íƒ€ì¼ */
      .auth-arrow { stroke: #e74c3c; stroke-width: 4; fill: none; marker-end: url(#auth-arrowhead); }
      .flow-arrow { stroke: #27ae60; stroke-width: 3; fill: none; marker-end: url(#flow-arrowhead); }
      .return-arrow { stroke: #3498db; stroke-width: 3; fill: none; marker-end: url(#return-arrowhead); stroke-dasharray: 5,5; }
      
      .highlight-box { fill: none; stroke: #e74c3c; stroke-width: 4; stroke-dasharray: 8,5; }
      .explanation-box { fill: #ecf0f1; stroke: #bdc3c7; stroke-width: 2; }
    </style>
    
    <marker id="auth-arrowhead" markerWidth="15" markerHeight="10" refX="14" refY="5" orient="auto">
      <polygon points="0 0, 15 5, 0 10" fill="#e74c3c" />
    </marker>
    <marker id="flow-arrowhead" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#27ae60" />
    </marker>
    <marker id="return-arrowhead" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#3498db" />
    </marker>
  </defs>
  
  <!-- ì œëª© -->
  <text x="900" y="35" text-anchor="middle" class="title">Spring Security ì¸ì¦ ì‘ì—… ì „ì²´ êµ¬ì¡°</text>
  <text x="900" y="65" text-anchor="middle" class="subtitle">WAS(Tomcat) â†’ Web Container â†’ Spring Container ì¸ì¦ í”Œë¡œìš°</text>
  
  <!-- WAS (Tomcat) ì˜ì—­ -->
  <rect x="50" y="100" width="500" height="250" rx="15" class="was-container"/>
  <text x="300" y="130" text-anchor="middle" class="component-text" font-size="18">WAS (Tomcat Container)</text>
  
  <!-- HTTP Request -->
  <rect x="80" y="160" width="150" height="50" rx="8" fill="#34495e" stroke="#2c3e50" stroke-width="2"/>
  <text x="155" y="180" class="component-text" font-size="14">HTTP Request</text>
  <text x="155" y="195" class="component-text" font-size="12">ë¡œê·¸ì¸ ìš”ì²­</text>
  
  <!-- Web Container ì˜ì—­ -->
  <rect x="280" y="160" width="250" height="170" rx="10" class="web-container"/>
  <text x="405" y="185" text-anchor="middle" class="component-text" font-size="16">Web Container</text>
  
  <!-- DelegatingFilterProxy -->
  <rect x="300" y="200" width="210" height="60" rx="8" class="delegating-filter"/>
  <rect x="295" y="195" width="220" height="70" rx="10" class="highlight-box"/>
  <text x="405" y="220" class="component-text">DelegatingFilterProxy</text>
  <text x="405" y="235" class="component-text" font-size="11">Servlet Containerì—ì„œ ë™ì‘</text>
  <text x="405" y="250" class="component-text" font-size="11">Spring Bean ìœ„ì„</text>
  
  <!-- ì¼ë°˜ Servlet Filters -->
  <rect x="300" y="280" width="100" height="30" rx="5" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
  <text x="350" y="300" class="auth-text">ê¸°íƒ€ Filter</text>
  
  <rect x="410" y="280" width="100" height="30" rx="5" fill="#95a5a6" stroke="#7f8c8d" stroke-width="2"/>
  <text x="460" y="300" class="auth-text">Servlet</text>
  
  <!-- Spring Container ì˜ì—­ -->
  <rect x="600" y="100" width="1150" height="700" rx="15" class="spring-container"/>
  <text x="1175" y="130" text-anchor="middle" class="component-text" font-size="18">Spring Container</text>
  
  <!-- SecurityFilterChain -->
  <rect x="650" y="160" width="300" height="80" rx="10" class="security-filter-chain"/>
  <rect x="645" y="155" width="310" height="90" rx="12" class="highlight-box"/>
  <text x="800" y="185" class="component-text" font-size="16">SecurityFilterChain</text>
  <text x="800" y="205" class="component-text" font-size="12">(FilterChainProxy)</text>
  <text x="800" y="220" class="component-text" font-size="11">Spring Security Filterë“¤ ê´€ë¦¬</text>
  
  <!-- Authentication Filters -->
  <text x="800" y="280" text-anchor="middle" class="subtitle" font-size="16">ğŸ” ì¸ì¦ ê´€ë ¨ í•„í„°ë“¤</text>
  
  <rect x="650" y="300" width="300" height="40" rx="5" class="auth-filter"/>
  <text x="800" y="325" class="component-text">UsernamePasswordAuthenticationFilter</text>
  
  <rect x="650" y="350" width="300" height="40" rx="5" class="auth-filter"/>
  <text x="800" y="375" class="component-text">BasicAuthenticationFilter</text>
  
  <rect x="650" y="400" width="300" height="40" rx="5" class="auth-filter"/>
  <text x="800" y="425" class="component-text">JwtAuthenticationFilter</text>
  
  <!-- Authentication Manager -->
  <rect x="1000" y="300" width="200" height="60" rx="8" class="auth-manager"/>
  <text x="1100" y="320" class="component-text">Authentication</text>
  <text x="1100" y="335" class="component-text">Manager</text>
  <text x="1100" y="350" class="component-text" font-size="11">ì¸ì¦ ì²˜ë¦¬ ì´ê´„</text>
  
  <!-- Authentication Provider -->
  <rect x="1250" y="200" width="180" height="60" rx="8" class="auth-provider"/>
  <text x="1340" y="220" class="component-text">Authentication</text>
  <text x="1340" y="235" class="component-text">Provider</text>
  <text x="1340" y="250" class="component-text" font-size="11">ì‹¤ì œ ì¸ì¦ ë¡œì§</text>
  
  <!-- UserDetailsService -->
  <rect x="1250" y="300" width="180" height="60" rx="8" class="user-service"/>
  <text x="1340" y="320" class="component-text">UserDetailsService</text>
  <text x="1340" y="335" class="component-text" font-size="11">ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ</text>
  <text x="1340" y="350" class="component-text" font-size="11">loadUserByUsername</text>
  
  <!-- PasswordEncoder -->
  <rect x="1250" y="400" width="180" height="60" rx="8" class="auth-provider"/>
  <text x="1340" y="420" class="component-text">PasswordEncoder</text>
  <text x="1340" y="435" class="component-text" font-size="11">ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”</text>
  <text x="1340" y="450" class="component-text" font-size="11">BCrypt, SHA ë“±</text>
  
  <!-- Database -->
  <rect x="1480" y="300" width="150" height="60" rx="8" class="database"/>
  <text x="1555" y="320" class="component-text">Database</text>
  <text x="1555" y="335" class="component-text" font-size="11">ì‚¬ìš©ì ì •ë³´</text>
  <text x="1555" y="350" class="component-text" font-size="11">ê¶Œí•œ ì •ë³´</text>
  
  <!-- SecurityContext -->
  <rect x="1000" y="500" width="200" height="60" rx="8" class="auth-manager"/>
  <text x="1100" y="520" class="component-text">SecurityContext</text>
  <text x="1100" y="535" class="component-text" font-size="11">ì¸ì¦ ì •ë³´ ì €ì¥</text>
  <text x="1100" y="550" class="component-text" font-size="11">SecurityContextHolder</text>
  
  <!-- Session -->
  <rect x="1250" y="500" width="180" height="60" rx="8" class="user-service"/>
  <text x="1340" y="520" class="component-text">HTTP Session</text>
  <text x="1340" y="535" class="component-text" font-size="11">ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦</text>
  <text x="1340" y="550" class="component-text" font-size="11">JSESSIONID</text>
  
  <!-- ì¸ì¦ í”Œë¡œìš° í™”ì‚´í‘œë“¤ -->
  
  <!-- 1. HTTP ìš”ì²­ -->
  <path d="M 230 185 L 270 185 L 270 230 L 290 230" class="flow-arrow"/>
  
  <!-- 2. DelegatingFilterProxy â†’ SecurityFilterChain -->
  <path d="M 520 230 L 570 230 L 570 200 L 640 200" class="flow-arrow"/>
  
  <!-- 3. SecurityFilterChain â†’ Authentication Filter -->
  <path d="M 800 240 L 800 290" class="flow-arrow"/>
  
  <!-- 4. Authentication Filter â†’ Authentication Manager -->
  <path d="M 950 320 L 990 320" class="auth-arrow"/>
  
  <!-- 5. Authentication Manager â†’ Authentication Provider -->
  <path d="M 1200 320 L 1200 230 L 1240 230" class="auth-arrow"/>
  
  <!-- 6. Authentication Provider â†’ UserDetailsService -->
  <path d="M 1340 260 L 1340 290" class="auth-arrow"/>
  
  <!-- 7. UserDetailsService â†’ Database -->
  <path d="M 1430 330 L 1470 330" class="auth-arrow"/>
  
  <!-- 8. Authentication Provider â†’ PasswordEncoder -->
  <path d="M 1340 260 L 1340 280 L 1400 280 L 1400 390 L 1340 390" class="auth-arrow"/>
  
  <!-- 9. ì¸ì¦ ì„±ê³µ í›„ SecurityContext ì €ì¥ -->
  <path d="M 1100 360 L 1100 490" class="return-arrow"/>
  
  <!-- 10. SecurityContext â†’ Session -->
  <path d="M 1200 530 L 1240 530" class="return-arrow"/>
  
  <!-- 11. ì‘ë‹µ ë°˜í™˜ -->
  <path d="M 640 200 L 580 200 L 580 400 L 300 400 L 300 370 L 155 370 L 155 250" class="return-arrow"/>
  
  <!-- ë‹¨ê³„ ë²ˆí˜¸ í‘œì‹œ -->
  <g id="step-numbers">
    <circle cx="250" cy="185" r="15" fill="#e74c3c"/>
    <text x="250" y="190" text-anchor="middle" fill="white" font-weight="bold">1</text>
    
    <circle cx="580" cy="200" r="15" fill="#e74c3c"/>
    <text x="580" y="205" text-anchor="middle" fill="white" font-weight="bold">2</text>
    
    <circle cx="970" cy="320" r="15" fill="#e74c3c"/>
    <text x="970" y="325" text-anchor="middle" fill="white" font-weight="bold">3</text>
    
    <circle cx="1220" cy="230" r="15" fill="#e74c3c"/>
    <text x="1220" y="235" text-anchor="middle" fill="white" font-weight="bold">4</text>
    
    <circle cx="1450" cy="330" r="15" fill="#e74c3c"/>
    <text x="1450" y="335" text-anchor="middle" fill="white" font-weight="bold">5</text>
    
    <circle cx="1100" cy="470" r="15" fill="#3498db"/>
    <text x="1100" y="475" text-anchor="middle" fill="white" font-weight="bold">6</text>
  </g>
  
  <!-- ì¸ì¦ ê³¼ì • ì„¤ëª… -->
  <rect x="50" y="400" width="500" height="380" rx="10" class="explanation-box"/>
  <text x="70" y="430" class="subtitle" font-size="16">ğŸ” ì¸ì¦ ì²˜ë¦¬ ê³¼ì •</text>
  
  <text x="70" y="460" class="text" font-weight="bold">1ë‹¨ê³„: HTTP ìš”ì²­ ìˆ˜ì‹ </text>
  <text x="90" y="480" class="text">â€¢ ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ í¼ì—ì„œ ID/PW ì…ë ¥</text>
  <text x="90" y="500" class="text">â€¢ WAS(Tomcat)ê°€ HTTP ìš”ì²­ ìˆ˜ì‹ </text>
  
  <text x="70" y="530" class="text" font-weight="bold">2ë‹¨ê³„: Filter Chain ì§„ì…</text>
  <text x="90" y="550" class="text">â€¢ DelegatingFilterProxyê°€ ìš”ì²­ ìˆ˜ì‹ </text>
  <text x="90" y="570" class="text">â€¢ Springì˜ SecurityFilterChainìœ¼ë¡œ ìœ„ì„</text>
  
  <text x="70" y="600" class="text" font-weight="bold">3ë‹¨ê³„: ì¸ì¦ í•„í„° ì²˜ë¦¬</text>
  <text x="90" y="620" class="text">â€¢ UsernamePasswordAuthenticationFilter ë™ì‘</text>
  <text x="90" y="640" class="text">â€¢ ì‚¬ìš©ì ìê²©ì¦ëª… ì¶”ì¶œ ë° í† í° ìƒì„±</text>
  
  <text x="70" y="670" class="text" font-weight="bold">4ë‹¨ê³„: ì¸ì¦ ë§¤ë‹ˆì € ì²˜ë¦¬</text>
  <text x="90" y="690" class="text">â€¢ AuthenticationManagerê°€ ì²˜ë¦¬ ì´ê´„</text>
  <text x="90" y="710" class="text">â€¢ ì ì ˆí•œ AuthenticationProvider ì„ íƒ</text>
  
  <text x="70" y="740" class="text" font-weight="bold">5ë‹¨ê³„: ì‹¤ì œ ì¸ì¦ ê²€ì¦</text>
  <text x="90" y="760" class="text">â€¢ UserDetailsServiceë¡œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ</text>
  <text x="90" y="780" class="text">â€¢ PasswordEncoderë¡œ ë¹„ë°€ë²ˆí˜¸ ê²€ì¦</text>
  
  <!-- ì¸ì¦ ê²°ê³¼ ì²˜ë¦¬ -->
  <rect x="600" y="650" width="550" height="120" rx="10" class="explanation-box"/>
  <text x="620" y="680" class="subtitle" font-size="16">âœ… ì¸ì¦ ì„±ê³µ ì‹œ ì²˜ë¦¬</text>
  
  <text x="620" y="710" class="text">â€¢ Authentication ê°ì²´ ìƒì„± (ì‚¬ìš©ì ì •ë³´ + ê¶Œí•œ)</text>
  <text x="620" y="730" class="text">â€¢ SecurityContextì— ì¸ì¦ ì •ë³´ ì €ì¥</text>
  <text x="620" y="750" class="text">â€¢ HTTP Sessionì— SecurityContext ì €ì¥ (ì„¸ì…˜ ê¸°ë°˜)</text>
  
  <!-- ë©´ì ‘ í¬ì¸íŠ¸ -->
  <rect x="50" y="820" width="1700" height="280" rx="10" fill="#fff3cd" stroke="#f39c12" stroke-width="2"/>
  <text x="900" y="850" text-anchor="middle" class="subtitle" font-size="18">ğŸ’¡ ë©´ì ‘ì—ì„œ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ë“¤</text>
  
  <text x="70" y="880" class="text" font-weight="bold">Q1: DelegatingFilterProxyì˜ ì—­í• ì€?</text>
  <text x="90" y="900" class="text">A: Servlet Containerì˜ Filterì™€ Spring Containerì˜ Beanì„ ì—°ê²°í•˜ëŠ” ë¸Œë¦¿ì§€ ì—­í• </text>
  
  <text x="70" y="930" class="text" font-weight="bold">Q2: SecurityFilterChainê³¼ AuthenticationManagerì˜ ê´€ê³„ëŠ”?</text>
  <text x="90" y="950" class="text">A: SecurityFilterChainì´ ì¸ì¦ í•„í„°ë“¤ì„ ê´€ë¦¬í•˜ê³ , ê° í•„í„°ê°€ AuthenticationManagerë¥¼ í†µí•´ ì‹¤ì œ ì¸ì¦ ì²˜ë¦¬</text>
  
  <text x="70" y="980" class="text" font-weight="bold">Q3: ì¸ì¦ ì •ë³´ëŠ” ì–´ë””ì— ì €ì¥ë˜ë‚˜ìš”?</text>
  <text x="90" y="1000" class="text">A: SecurityContextì— ì €ì¥ë˜ê³ , ì´ëŠ” SecurityContextHolderë¥¼ í†µí•´ ì ‘ê·¼. ì„¸ì…˜ ê¸°ë°˜ì—ì„œëŠ” HTTP Sessionì— ì €ì¥</text>
  
  <text x="70" y="1030" class="text" font-weight="bold">Q4: AuthenticationProviderì™€ UserDetailsServiceì˜ ì°¨ì´ëŠ”?</text>
  <text x="90" y="1050" class="text">A: AuthenticationProviderëŠ” ì¸ì¦ ë¡œì§ êµ¬í˜„, UserDetailsServiceëŠ” ì‚¬ìš©ì ì •ë³´ ì¡°íšŒë§Œ ë‹´ë‹¹</text>
  
  <text x="70" y="1080" class="text" font-weight="bold">Q5: PasswordEncoderì˜ ì—­í• ì€?</text>
  <text x="90" y="1100" class="text">A: ë¹„ë°€ë²ˆí˜¸ ì•”í˜¸í™”/ë³µí˜¸í™”. ë³´í†µ BCrypt, SHA256 ë“± ë‹¨ë°©í–¥ í•´ì‹œ ì•Œê³ ë¦¬ì¦˜ ì‚¬ìš©</text>
  
  <!-- êµ¬ì¡° ìš”ì•½ -->
  <rect x="1200" y="650" width="550" height="120" rx="10" class="explanation-box"/>
  <text x="1220" y="680" class="subtitle" font-size="16">ğŸ—ï¸ ì „ì²´ êµ¬ì¡° ìš”ì•½</text>
  
  <text x="1220" y="710" class="text">â€¢ WAS â†’ Web Container â†’ Spring Container ìˆœì„œ</text>
  <text x="1220" y="730" class="text">â€¢ Filter Chain â†’ Authentication â†’ Authorization</text>
  <text x="1220" y="750" class="text">â€¢ ê° ê³„ì¸µë³„ ëª…í™•í•œ ì±…ì„ ë¶„ë¦¬</text>
  
  <!-- ê¸°ìˆ  ìŠ¤íƒ ì •ë³´ -->
  <text x="50" y="1140" class="small-text" font-style="italic">ğŸ’» ì£¼ìš” ê¸°ìˆ : Spring Security, Servlet API, HTTP Session, BCrypt, JPA/MyBatis</text>
  <text x="50" y="1160" class="small-text" font-style="italic">ğŸ”§ ì„¤ì •: @EnableWebSecurity, SecurityConfig, WebSecurityConfigurerAdapter (êµ¬ë²„ì „)</text>
  <text x="50" y="1180" class="small-text" font-style="italic">ğŸ“š ìµœì‹ : SecurityFilterChain Bean ë°©ì‹ (Spring Security 5.7+)</text>
  
</svg>